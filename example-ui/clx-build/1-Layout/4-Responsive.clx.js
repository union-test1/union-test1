/*
 * App URI: 1-Layout/4-Responsive
 * Source Location: 1-Layout/4-Responsive.clx
 *
 * This file was generated by eXbuilder6 compiler, Don't edit manually.
 */
(function(){
	var app = new cpr.core.App("1-Layout/4-Responsive", {
		onPrepare: function(loader){
		},
		onCreate: function(/* cpr.core.AppInstance */ app, exports){
			var linker = {};
			// Start - User Script
			
			/*
			 * 그리드에서 selection-change 이벤트 발생 시 호출.
			 * detail의 cell 클릭하여 설정된 selectionunit에 해당되는 단위가 선택될 때 발생하는 이벤트입니다.
			 */
			function onGrd1SelectionChange(/* cpr.events.CSelectionEvent */ e){
				/** 
				 * @type cpr.controls.Grid
				 */
				var grd1 = e.control;
				var selectedRowIndex = grd1.getSelectedRowIndices()[0];
				
				var detail = app.lookup("detail");
				detail.setBindContext(new cpr.bind.DataRowContext(grd1.dataSet, selectedRowIndex));
			};
			// End - User Script
			
			// Header
			var dataSet_1 = new cpr.data.DataSet("ds1");
			dataSet_1.parseData({
				"columns": [
					{"name": "id"},
					{"name": "name"},
					{"name": "start"},
					{
						"name": "progress",
						"dataType": "number"
					},
					{"name": "note"}
				],
				"rows": [
					{"id": "id1", "name": "Caramelize Onion", "start": "20180510", "progress": "10", "note": "note1"},
					{"id": "id2", "name": "Buy a milk", "start": "20180501", "progress": "100", "note": "note2"},
					{"id": "id3", "name": "Trip to Saipan", "start": "20180421", "progress": "50", "note": "note3"},
					{"id": "id4", "name": "Book a conert ticket", "start": "20180309", "progress": "40", "note": "note4"}
				]
			});
			(function(dataSet){
				var dataView_1 = new cpr.data.DataView("dv1", dataSet);
				dataView_1.parseData({"filterCondition": "column1 *= \"2\""});
				app.register(dataView_1);
			})(dataSet_1);
			app.register(dataSet_1);
			
			app.supportMedia("all and (min-width: 1024px)", "default");
			app.supportMedia("all and (min-width: 500px) and (max-width: 1023px)", "tablet");
			app.supportMedia("all and (max-width: 499px)", "mobile");
			
			// Configure root container
			var container = app.getContainer();
			container.style.css({
				"width" : "100%",
				"top" : "0px",
				"height" : "100%",
				"left" : "0px"
			});
			
			// Layout
			var responsiveXYLayout_1 = new cpr.controls.layouts.ResponsiveXYLayout();
			container.setLayout(responsiveXYLayout_1);
			
			// UI Configuration
			var grid_1 = new cpr.controls.Grid("grd1");
			grid_1.init({
				"dataSet": app.lookup("ds1"),
				"columns": [
					{"width": "100px"},
					{"width": "100px"},
					{"width": "100px"},
					{"width": "100px"},
					{"width": "100px"}
				],
				"header": {
					"rows": [{"height": "24px"}],
					"cells": [
						{
							"constraint": {"rowIndex": 0, "colIndex": 0},
							"configurator": function(cell){
								cell.text = "ID";
							}
						},
						{
							"constraint": {"rowIndex": 0, "colIndex": 1},
							"configurator": function(cell){
								cell.text = "Task";
							}
						},
						{
							"constraint": {"rowIndex": 0, "colIndex": 2},
							"configurator": function(cell){
								cell.text = "Start";
							}
						},
						{
							"constraint": {"rowIndex": 0, "colIndex": 3},
							"configurator": function(cell){
								cell.text = "Progress";
							}
						},
						{
							"constraint": {"rowIndex": 0, "colIndex": 4},
							"configurator": function(cell){
								cell.text = "Note";
							}
						}
					]
				},
				"detail": {
					"rows": [{"height": "24px"}],
					"cells": [
						{
							"constraint": {"rowIndex": 0, "colIndex": 0},
							"configurator": function(cell){
								cell.columnName = "id";
								cell.style.css({
									"text-align" : "center"
								});
							}
						},
						{
							"constraint": {"rowIndex": 0, "colIndex": 1},
							"configurator": function(cell){
								cell.columnName = "name";
								cell.style.css({
									"text-align" : "center"
								});
							}
						},
						{
							"constraint": {"rowIndex": 0, "colIndex": 2},
							"configurator": function(cell){
								cell.columnName = "start";
								cell.control = (function(){
									var dateInput_1 = new cpr.controls.DateInput("dti2");
									dateInput_1.bind("value").toDataColumn("start");
									return dateInput_1;
								})();
							}
						},
						{
							"constraint": {"rowIndex": 0, "colIndex": 3},
							"configurator": function(cell){
								cell.columnName = "progress";
								cell.control = (function(){
									var output_1 = new cpr.controls.Output();
									output_1.style.css({
										"padding-top" : "0px",
										"padding-left" : "0px",
										"padding-bottom" : "0px",
										"text-align" : "right",
										"padding-right" : "10px"
									});
									output_1.bind("value").toExpression("progress + \"%\"");
									return output_1;
								})();
							}
						},
						{
							"constraint": {"rowIndex": 0, "colIndex": 4},
							"configurator": function(cell){
								cell.columnName = "note";
								cell.style.css({
									"text-align" : "center"
								});
							}
						}
					]
				}
			});
			if(typeof onGrd1SelectionChange == "function") {
				grid_1.addEventListener("selection-change", onGrd1SelectionChange);
			}
			container.addChild(grid_1, {
				positions: [
					{
						"media": "all and (min-width: 1024px)",
						"top": "20px",
						"right": "543px",
						"bottom": "20px",
						"left": "20px"
					}, 
					{
						"media": "all and (min-width: 500px) and (max-width: 1023px)",
						"top": "20px",
						"right": "20px",
						"bottom": "210px",
						"left": "20px"
					}, 
					{
						"media": "all and (max-width: 499px)",
						"top": "20px",
						"right": "14px",
						"bottom": "210px",
						"left": "14px"
					}
				]
			});
			
			var group_1 = new cpr.controls.Container("detail");
			group_1.style.css({
				"border-right-style" : "solid",
				"border-top-width" : "1px",
				"border-bottom-color" : "gray",
				"border-left-style" : "solid",
				"border-right-width" : "1px",
				"border-bottom-width" : "1px",
				"border-left-color" : "gray",
				"border-top-color" : "gray",
				"border-bottom-style" : "solid",
				"border-right-color" : "gray",
				"border-left-width" : "1px",
				"border-top-style" : "solid"
			});
			var dataRowContext_1 = new cpr.bind.DataRowContext(app.lookup("ds1"), 0);
			group_1.setBindContext(dataRowContext_1);
			// Layout
			var formLayout_1 = new cpr.controls.layouts.FormLayout();
			formLayout_1.topMargin = "5";
			formLayout_1.rightMargin = "5";
			formLayout_1.bottomMargin = "5";
			formLayout_1.leftMargin = "5";
			formLayout_1.horizontalSeparatorWidth = 1;
			formLayout_1.verticalSeparatorWidth = 1;
			formLayout_1.setColumns(["100px", "1fr"]);
			formLayout_1.setUseColumnShade(0, true);
			formLayout_1.setRows(["25px", "25px", "25px", "25px", "1fr"]);
			group_1.setLayout(formLayout_1);
			(function(container){
				var output_2 = new cpr.controls.Output();
				output_2.value = "ID";
				output_2.style.css({
					"text-align" : "right"
				});
				container.addChild(output_2, {
					"colIndex": 0,
					"rowIndex": 0,
					"verticalAlign": "fill"
				});
				var output_3 = new cpr.controls.Output();
				output_3.value = "Task";
				output_3.style.css({
					"text-align" : "right"
				});
				container.addChild(output_3, {
					"colIndex": 0,
					"rowIndex": 1,
					"verticalAlign": "fill"
				});
				var output_4 = new cpr.controls.Output();
				output_4.value = "Start";
				output_4.style.css({
					"text-align" : "right"
				});
				container.addChild(output_4, {
					"colIndex": 0,
					"rowIndex": 2,
					"verticalAlign": "fill"
				});
				var output_5 = new cpr.controls.Output();
				output_5.value = "Progress";
				output_5.style.css({
					"text-align" : "right"
				});
				container.addChild(output_5, {
					"colIndex": 0,
					"rowIndex": 3,
					"verticalAlign": "fill"
				});
				var output_6 = new cpr.controls.Output();
				output_6.value = "Note";
				output_6.style.css({
					"text-align" : "right"
				});
				container.addChild(output_6, {
					"colIndex": 0,
					"rowIndex": 4,
					"verticalAlign": "top"
				});
				var inputBox_1 = linker.inputBox_1 = new cpr.controls.InputBox("ipb1");
				inputBox_1.bind("value").toDataColumn("id");
				container.addChild(inputBox_1, {
					"colIndex": 1,
					"rowIndex": 0
				});
				var inputBox_2 = linker.inputBox_2 = new cpr.controls.InputBox("ipb2");
				inputBox_2.bind("value").toDataColumn("name");
				container.addChild(inputBox_2, {
					"colIndex": 1,
					"rowIndex": 1
				});
				var inputBox_3 = new cpr.controls.InputBox("ipb5");
				inputBox_3.bind("value").toDataColumn("note");
				container.addChild(inputBox_3, {
					"colIndex": 1,
					"rowIndex": 4
				});
				var dateInput_2 = new cpr.controls.DateInput("dti1");
				dateInput_2.bind("value").toDataColumn("start");
				container.addChild(dateInput_2, {
					"colIndex": 1,
					"rowIndex": 2
				});
				var progress_1 = new cpr.controls.Progress();
				progress_1.value = "50";
				progress_1.bind("value").toDataColumn("progress");
				container.addChild(progress_1, {
					"colIndex": 1,
					"rowIndex": 3
				});
			})(group_1);
			container.addChild(group_1, {
				positions: [
					{
						"media": "all and (min-width: 1024px)",
						"top": "20px",
						"right": "20px",
						"bottom": "20px",
						"width": "513px"
					}, 
					{
						"media": "all and (min-width: 500px) and (max-width: 1023px)",
						"right": "20px",
						"bottom": "20px",
						"left": "20px",
						"height": "180px"
					}, 
					{
						"media": "all and (max-width: 499px)",
						"right": "14px",
						"bottom": "20px",
						"left": "14px",
						"height": "180px"
					}
				]
			});
			// Linking
			linker.inputBox_1.setNextControl(linker.inputBox_2);
			linker.inputBox_2.setPrevControl(linker.inputBox_1);
		}
	});
	app.title = "4-Responsive";
	cpr.core.Platform.INSTANCE.register(app);
})();
