/*
 * App URI: example/grid/grid_getColumnByColIndex
 * Source Location: example/grid/grid_getColumnByColIndex.clx
 *
 * This file was generated by eXbuilder6 compiler, Don't edit manually.
 */
(function(){
	var app = new cpr.core.App("example/grid/grid_getColumnByColIndex", {
		onPrepare: function(loader){
		},
		onCreate: function(/* cpr.core.AppInstance */ app, exports){
			var linker = {};
			// Start - User Script
			
			/*
			 * 그리드에서 cell-click 이벤트 발생 시 호출.
			 * Grid의 Cell 클릭시 발생하는 이벤트.
			 */
			function onGrd1CellClick(/* cpr.events.CGridEvent */ e){
				/** 
				 * @type cpr.controls.Grid
				 */
				var grd = e.control;
				
				// 선택된 cell 정보를 배열로 반환합니다.
				var selectCell = grd.getSelectedCellIndices()[0];
				
				// 선택된 cell의 컬럼을 반환합니다.
				var detailColumn = grd.detail.getColumn(selectCell.cellIndex);
				
				// 선택된 GridColumn 배열을 반환합니다.
				var headerColumn = grd.header.getColumnByColIndex(detailColumn.colIndex, detailColumn.colSpan);
				
				alert("header cell text는 "+"[ "+headerColumn[0].getText()+" ]"+ "입니다.");
			}
			
			/*
			 * 그리드에서 rowgroup-click 이벤트 발생 시 호출.
			 * Grid의 RowGroup 클릭시 발생하는 이벤트.
			 */
			function onGrd1RowgroupClick(/* cpr.events.CGridEvent */ e){
				/** 
				 * @type cpr.controls.Grid
				 */
				var grd = e.control;
				
				alert("그리드의 RowGroup 입니다.")
			};
			// End - User Script
			
			// Header
			app.declareBindableAppProperty("title", null);
			app.declareBindableAppProperty("explain", null);
			var dataSet_1 = new cpr.data.DataSet("ds_list");
			dataSet_1.parseData({
				"columns": [
					{"name": "year"},
					{"name": "quarter"},
					{"name": "month"},
					{"name": "f_half_budget"},
					{"name": "s_half_budget"},
					{"name": "f_half_expenditure"},
					{"name": "s_half_expenditure"},
					{
						"name": "excess",
						"dataType": "expression",
						"displayOnly": true,
						"expression": "(s_half_expenditure+f_half_expenditure)-(s_half_budget+f_half_budget)"
					}
				],
				"rows": [
					{"year": "2016", "quarter": "1", "month": "1", "s_half_budget": "55500000", "s_half_expenditure": "2244000", "f_half_budget": "11457220", "f_half_expenditure": "789400000"},
					{"year": "2016", "quarter": "1", "month": "2", "s_half_budget": "2271000", "s_half_expenditure": "2390000", "f_half_budget": "24245700", "f_half_expenditure": "5472000"},
					{"year": "2016", "quarter": "2", "month": "1", "s_half_budget": "2789000", "s_half_expenditure": "2222000", "f_half_budget": "757582720", "f_half_expenditure": "579440000"},
					{"year": "2016", "quarter": "2", "month": "2", "f_half_budget": "4575724", "s_half_budget": "52572010", "f_half_expenditure": "2252670", "s_half_expenditure": "25397340", "excess": "excess11"},
					{"year": "2016", "quarter": "2", "month": "3", "f_half_budget": "224242400", "s_half_budget": "242427242", "f_half_expenditure": "242424780", "s_half_expenditure": "739754000", "excess": "excess12"},
					{"year": "2016", "quarter": "1", "month": "3", "f_half_budget": "2000000", "s_half_budget": "50400000", "f_half_expenditure": "47000000", "s_half_expenditure": "401001000", "excess": "excess16"},
					{"year": "2016", "quarter": "1", "month": "4", "f_half_budget": "20000000", "s_half_budget": "5700000", "f_half_expenditure": "22500000", "s_half_expenditure": "7000000", "excess": "excess17"},
					{"year": "2017", "quarter": "1", "month": "1", "s_half_budget": "2798700", "s_half_expenditure": "1247000", "f_half_budget": "22575727", "f_half_expenditure": "520000"},
					{"year": "2017", "quarter": "1", "month": "1", "s_half_budget": "1133300", "s_half_expenditure": "88880000", "f_half_budget": "45752504", "f_half_expenditure": "5200000"},
					{"year": "2017", "quarter": "2", "month": "1", "s_half_budget": "8888470", "s_half_expenditure": "222720", "f_half_budget": "249872400", "f_half_expenditure": "78850000"},
					{"year": "2017", "quarter": "2", "month": "2", "f_half_budget": "7000000", "s_half_budget": "5000000", "f_half_expenditure": "25725040", "s_half_expenditure": "75758350", "excess": "excess13"},
					{"year": "2017", "quarter": "2", "month": "3", "f_half_budget": "9000000", "s_half_budget": "2000000", "f_half_expenditure": "74747140", "s_half_expenditure": "20553500", "excess": "excess14"},
					{"year": "2017", "quarter": "2", "month": "4", "f_half_budget": "9800000", "s_half_budget": "20000000", "f_half_expenditure": "4000000", "s_half_expenditure": "5000000", "excess": "excess15"},
					{"year": "2018", "quarter": "1", "month": "1", "s_half_budget": "2222000", "s_half_expenditure": "7899990", "f_half_budget": "2220000", "f_half_expenditure": "6892000"},
					{"year": "2018", "quarter": "1", "month": "2", "s_half_budget": "99990000", "s_half_expenditure": "88784100", "f_half_budget": "25500000", "f_half_expenditure": "36520000"},
					{"year": "2018", "quarter": "1", "month": "3", "s_half_budget": "9634220", "s_half_expenditure": "6642140", "f_half_budget": "50000000", "f_half_expenditure": "2580000"},
					{"year": "2018", "quarter": "1", "month": "4", "s_half_budget": "57996000", "s_half_expenditure": "24579620", "f_half_budget": "24040000", "f_half_expenditure": "24414000"},
					{"year": "2018", "quarter": "2", "month": "1", "f_half_budget": "11100000", "s_half_budget": "2222000", "f_half_expenditure": "444000", "s_half_expenditure": "5500000", "excess": "excess18"},
					{"year": "2018", "quarter": "2", "month": "2", "f_half_budget": "10000000", "s_half_budget": "2000000", "f_half_expenditure": "1200000", "s_half_expenditure": "55555000", "excess": "excess19"},
					{"year": "2018", "quarter": "2", "month": "3", "f_half_budget": "1111100000", "s_half_budget": "70000000", "f_half_expenditure": "41000000", "s_half_expenditure": "22200000", "excess": "excess20"},
					{"year": "2018", "quarter": "2", "month": "4", "f_half_budget": "1000000", "s_half_budget": "3000000", "f_half_expenditure": "8000000", "s_half_expenditure": "9990000", "excess": "excess21"}
				]
			});
			app.register(dataSet_1);
			
			app.supportMedia("all and (min-width: 1024px)", "default");
			app.supportMedia("all and (min-width: 800px) and (max-width: 1023px)", "new-screen");
			app.supportMedia("all and (min-width: 500px) and (max-width: 799px)", "tablet");
			app.supportMedia("all and (max-width: 499px)", "mobile");
			
			// Configure root container
			var container = app.getContainer();
			container.style.css({
				"width" : "100%",
				"top" : "0px",
				"height" : "100%",
				"left" : "0px"
			});
			
			// Layout
			var xYLayout_1 = new cpr.controls.layouts.XYLayout();
			container.setLayout(xYLayout_1);
			
			// UI Configuration
			var group_1 = new cpr.controls.Container();
			// Layout
			var formLayout_1 = new cpr.controls.layouts.FormLayout();
			formLayout_1.setColumns(["1fr"]);
			formLayout_1.setRows(["1fr"]);
			group_1.setLayout(formLayout_1);
			(function(container){
				var grid_1 = new cpr.controls.Grid("grd1");
				grid_1.init({
					"dataSet": app.lookup("ds_list"),
					"selectionUnit": "cell",
					"columns": [
						{"width": "30px"},
						{"width": "60px"},
						{"width": "60px"},
						{"width": "60px"},
						{"width": "100px"},
						{"width": "100px"},
						{"width": "100px"},
						{"width": "100px"},
						{"width": "100px"}
					],
					"header": {
						"rows": [
							{"height": "24px"},
							{"height": "24px"}
						],
						"cells": [
							{
								"constraint": {"rowIndex": 0, "colIndex": 1, "rowSpan": 2, "colSpan": 1},
								"configurator": function(cell){
									cell.text = "년도";
								}
							},
							{
								"constraint": {"rowIndex": 0, "colIndex": 2, "rowSpan": 2, "colSpan": 1},
								"configurator": function(cell){
									cell.text = "분기";
								}
							},
							{
								"constraint": {"rowIndex": 0, "colIndex": 3, "rowSpan": 2, "colSpan": 1},
								"configurator": function(cell){
									cell.text = "월";
								}
							},
							{
								"constraint": {"rowIndex": 0, "colIndex": 4, "rowSpan": 1, "colSpan": 2},
								"configurator": function(cell){
									cell.text = "예산";
								}
							},
							{
								"constraint": {"rowIndex": 0, "colIndex": 6, "rowSpan": 1, "colSpan": 2},
								"configurator": function(cell){
									cell.text = "지출";
								}
							},
							{
								"constraint": {"rowIndex": 0, "colIndex": 0, "rowSpan": 2, "colSpan": 1},
								"configurator": function(cell){
									cell.text = "";
								}
							},
							{
								"constraint": {"rowIndex": 0, "colIndex": 8, "rowSpan": 2, "colSpan": 1},
								"configurator": function(cell){
									cell.text = "초과액";
								}
							},
							{
								"constraint": {"rowIndex": 1, "colIndex": 5},
								"configurator": function(cell){
									cell.text = "후반기";
								}
							},
							{
								"constraint": {"rowIndex": 1, "colIndex": 7},
								"configurator": function(cell){
									cell.text = "후반기";
								}
							},
							{
								"constraint": {"rowIndex": 1, "colIndex": 4},
								"configurator": function(cell){
									cell.text = "전반기";
								}
							},
							{
								"constraint": {"rowIndex": 1, "colIndex": 6},
								"configurator": function(cell){
									cell.text = "전반기";
								}
							}
						]
					},
					"detail": {
						"rows": [{"height": "24px"}],
						"cells": [
							{
								"constraint": {"rowIndex": 0, "colIndex": 1},
								"configurator": function(cell){
									cell.columnName = "year";
								}
							},
							{
								"constraint": {"rowIndex": 0, "colIndex": 2},
								"configurator": function(cell){
									cell.columnName = "quarter";
								}
							},
							{
								"constraint": {"rowIndex": 0, "colIndex": 3},
								"configurator": function(cell){
									cell.columnName = "month";
								}
							},
							{
								"constraint": {"rowIndex": 0, "colIndex": 5},
								"configurator": function(cell){
									cell.columnName = "s_half_budget";
									cell.control = (function(){
										var numberEditor_1 = new cpr.controls.NumberEditor("nbe1");
										numberEditor_1.format = "s000,000,000,000";
										numberEditor_1.bind("value").toDataColumn("s_half_budget");
										return numberEditor_1;
									})();
								}
							},
							{
								"constraint": {"rowIndex": 0, "colIndex": 7},
								"configurator": function(cell){
									cell.columnName = "s_half_expenditure";
									cell.control = (function(){
										var numberEditor_2 = new cpr.controls.NumberEditor("nbe2");
										numberEditor_2.format = "s000,000,000,000";
										numberEditor_2.bind("value").toDataColumn("s_half_expenditure");
										return numberEditor_2;
									})();
								}
							},
							{
								"constraint": {"rowIndex": 0, "colIndex": 0},
								"configurator": function(cell){
									cell.columnType = "rowindex";
									cell.style.css({
										"text-align" : "center"
									});
								}
							},
							{
								"constraint": {"rowIndex": 0, "colIndex": 8},
								"configurator": function(cell){
									cell.columnName = "excess";
									cell.control = (function(){
										var numberEditor_3 = new cpr.controls.NumberEditor("nbe3");
										numberEditor_3.format = "s000,000,000,000";
										numberEditor_3.bind("value").toDataColumn("excess");
										return numberEditor_3;
									})();
								}
							},
							{
								"constraint": {"rowIndex": 0, "colIndex": 4},
								"configurator": function(cell){
									cell.columnName = "f_half_budget";
								}
							},
							{
								"constraint": {"rowIndex": 0, "colIndex": 6},
								"configurator": function(cell){
									cell.columnName = "f_half_expenditure";
								}
							}
						]
					},
					"rowGroup": [{
						"groupCondition": "year",
						"gheader": {
							"rows": [{"height": "24px"}],
							"cells": [{
								"constraint": {"rowIndex": 0, "colIndex": 0, "rowSpan": 1, "colSpan": 9},
								"configurator": function(cell){
									cell.expr = "year +'년도 ' + month + '월'";
									cell.style.css({
										"text-align" : "center"
									});
								}
							}]
						},
						"gfooter": {
							"rows": [{"height": "30px"}],
							"cells": [
								{
									"constraint": {"rowIndex": 0, "colIndex": 5},
									"configurator": function(cell){
										cell.expr = "getSum('s_half_budget')";
										cell.control = (function(){
											var numberEditor_4 = new cpr.controls.NumberEditor("nbe4");
											numberEditor_4.format = "s000,000,000,000";
											return numberEditor_4;
										})();
									}
								},
								{
									"constraint": {"rowIndex": 0, "colIndex": 7},
									"configurator": function(cell){
										cell.expr = "getSum('s_half_expenditure')";
										cell.control = (function(){
											var numberEditor_5 = new cpr.controls.NumberEditor("nbe5");
											numberEditor_5.format = "s000,000,000,000";
											return numberEditor_5;
										})();
									}
								},
								{
									"constraint": {"rowIndex": 0, "colIndex": 0, "rowSpan": 1, "colSpan": 4},
									"configurator": function(cell){
										cell.expr = "";
										cell.style.css({
											"background-color" : "#C0C0C0"
										});
									}
								},
								{
									"constraint": {"rowIndex": 0, "colIndex": 8},
									"configurator": function(cell){
										cell.expr = "getSum('excess')";
										cell.control = (function(){
											var numberEditor_6 = new cpr.controls.NumberEditor("nbe6");
											numberEditor_6.format = "s000,000,000,000";
											return numberEditor_6;
										})();
									}
								},
								{
									"constraint": {"rowIndex": 0, "colIndex": 4},
									"configurator": function(cell){
										cell.expr = "getSum('f_half_budget')";
										cell.control = (function(){
											var numberEditor_7 = new cpr.controls.NumberEditor("nbe7");
											return numberEditor_7;
										})();
									}
								},
								{
									"constraint": {"rowIndex": 0, "colIndex": 6},
									"configurator": function(cell){
										cell.expr = "getSum('f_half_expenditure')";
										cell.control = (function(){
											var numberEditor_8 = new cpr.controls.NumberEditor("nbe8");
											return numberEditor_8;
										})();
									}
								}
							]
						}
					}]
				});
				if(typeof onGrd1CellClick == "function") {
					grid_1.addEventListener("cell-click", onGrd1CellClick);
				}
				if(typeof onGrd1RowgroupClick == "function") {
					grid_1.addEventListener("rowgroup-click", onGrd1RowgroupClick);
				}
				container.addChild(grid_1, {
					"colIndex": 0,
					"rowIndex": 0
				});
			})(group_1);
			container.addChild(group_1, {
				"top": "70px",
				"right": "10px",
				"bottom": "10px",
				"left": "10px"
			});
			
			var userDefinedControl_1 = new udc.pagetitle2();
			userDefinedControl_1.bind("title").toAppProperty("title");
			userDefinedControl_1.bind("explain").toAppProperty("explain");
			container.addChild(userDefinedControl_1, {
				"top": "10px",
				"right": "10px",
				"left": "10px",
				"height": "50px"
			});
		}
	});
	app.title = "grid_getColumnByColIndex";
	cpr.core.Platform.INSTANCE.register(app);
})();
