/*
 * App URI: example/plugin/scheduler
 * Source Location: example/plugin/scheduler.clx
 *
 * This file was generated by eXbuilder6 compiler, Don't edit manually.
 */
(function(){
	var app = new cpr.core.App("example/plugin/scheduler", {
		onPrepare: function(loader){
		},
		onCreate: function(/* cpr.core.AppInstance */ app, exports){
			var linker = {};
			// Start - User Script
			
			// scheduler의 이벤트 핸들러
			var onEventAddedHandler = null;
			
			/*
			 * 쉘에서 init 이벤트 발생 시 호출.
			 */
			function onUIControlShellInit(/* cpr.events.CUIEvent */ e){
				/** 
				 * @type cpr.controls.UIControlShell
				 */
				var uIControlShell = e.control;
				
				var divObj = e.content;
				if(divObj) {
					divObj.innerHTML = "";
				}
				
				if(onEventAddedHandler) {
					scheduler.detachEvent(onEventAddedHandler);
					onEventAddedHandler = null;
				}
			}
			
			/*
			 * 쉘에서 load 이벤트 발생 시 호출.
			 */
			function onUIControlShellLoad(/* cpr.events.CUIEvent */ e){
				/** 
				 * @type cpr.controls.UIControlShell
				 */
				var uIControlShell = e.control;
				var divObj = e.content;
				
				var shape = "<div id=\"scheduler_here\" class=\"dhx_cal_container\" style=\"width:100%; height:100%;\">"
					+ "<div class=\"dhx_cal_navline\">"
					+ "<div class=\"dhx_cal_prev_button\">&nbsp;</div>"
					+ "<div class=\"dhx_cal_next_button\">&nbsp;</div>"
					+ "<div class=\"dhx_cal_today_button\"></div>"
					+ "<div class=\"dhx_cal_date\"></div>"
					+ "<div class=\"dhx_cal_tab\" name=\"day_tab\" style=\"right:204px;\"></div>"
					+ "<div class=\"dhx_cal_tab\" name=\"week_tab\" style=\"right:140px;\"></div>"
					+ "<div class=\"dhx_cal_tab\" name=\"month_tab\" style=\"right:76px;\"></div>"
					+ "</div><div class=\"dhx_cal_header\"></div><div class=\"dhx_cal_data\"></div></div>";
				
				divObj.innerHTML = shape;
				
				scheduler.config.xml_date="%Y-%m-%d %H:%i";
				scheduler.init('scheduler_here', new Date(2018,0,1), "week");
				
			//	console.log("attachEvent");
				onEventAddedHandler = scheduler.attachEvent("onEventAdded", onEventAdded);
			}
			
			function onEventAdded(id, ev) {
				console.log(ev);
				
				return true;
			}
			
			/*
			 * "Load" 버튼에서 click 이벤트 발생 시 호출.
			 * 사용자가 컨트롤을 클릭할 때 발생하는 이벤트.
			 */
			function onButtonClick(/* cpr.events.CMouseEvent */ e){
				/** 
				 * @type cpr.controls.Button
				 */
				var button = e.control;
				
				var ds = app.lookup("ds_schedule");
				var rowCnt = ds.getRowCount();
				
				var events = [];
				for(var i = 0; i < rowCnt; i++) {
					events[events.length] = {
							id : ds.getValue(i, "id"),
							start_date : ds.getValue(i, "start"),
							end_date : ds.getValue(i, "end"),
							text : ds.getValue(i, "text")
					};
				}
				scheduler.parse(events, "json");
			};
			// End - User Script
			
			// Header
			var dataSet_1 = new cpr.data.DataSet("ds_schedule");
			dataSet_1.parseData({
				"columns": [
					{"name": "id"},
					{"name": "start"},
					{"name": "end"},
					{"name": "text"}
				],
				"rows": [
					{"id": "1261150491", "start": "2017-12-19 07:00", "end": "2017-12-21 07:00", "text": "International Horse Show"},
					{"id": "1261150492", "start": "2017-12-19 18:00", "end": "2017-12-19 20:00", "text": "Ladbrokes.com World Darts Championships (Evening session)"},
					{"id": "1261150493", "start": "2017-12-20 08:00", "end": "2017-12-20 10:00", "text": "Peter Pan"},
					{"id": "1261150494", "start": "2017-12-21 08:00", "end": "2017-12-21 10:00", "text": "Pet Shop Boys"},
					{"id": "1261150495", "start": "2017-12-22 06:00", "end": "2017-12-22 08:00", "text": "Wicked"},
					{"id": "1261150496", "start": "2017-12-23 15:00", "end": "2017-12-25 15:00", "text": "Ladbrokes.com World Darts Championships (Afternoon session)"},
					{"id": "1261150497", "start": "2017-12-23 15:00", "end": "2017-12-23 17:00", "text": "Calendar Girls"},
					{"id": "1261150498", "start": "2017-12-24 14:00", "end": "2017-12-24 16:00", "text": "Sister Act"},
					{"id": "1261150499", "start": "2017-12-26 18:00", "end": "2017-12-26 20:00", "text": "Dirty Dancing"},
					{"id": "1261150500", "start": "2017-12-27 09:00", "end": "2017-12-27 11:00", "text": "Harlequins -  Wasps     Competition: Guinness Premiership"},
					{"id": "1261150501", "start": "2017-12-28 07:00", "end": "2017-12-30 07:00", "text": "Peter Pan"},
					{"id": "1261150502", "start": "2017-12-29 08:00", "end": "2017-12-29 10:00", "text": "The Nutcracker"},
					{"id": "1261150503", "start": "2017-12-29 13:00", "end": "2017-12-29 15:00", "text": "The Nutcracker"},
					{"id": "1261150504", "start": "2017-12-30 15:00", "end": "2017-12-30 17:00", "text": "Peter Pan"},
					{"id": "1261150505", "start": "2017-12-31 17:00", "end": "2017-12-31 19:00", "text": "Legally Blonde The Musical"},
					{"id": "1261150506", "start": "2018-01-01 18:00", "end": "2018-01-03 18:00", "text": "Sister Act"},
					{"id": "1261150507", "start": "2018-01-02 07:00", "end": "2018-01-02 09:00", "text": "Cat On a Hot Tin Roof"},
					{"id": "1261150508", "start": "2018-01-02 07:00", "end": "2018-01-02 09:00", "text": "Grease"},
					{"id": "1261150509", "start": "2018-01-03 17:00", "end": "2018-01-03 19:00", "text": "Ladbrokes.com World Darts Championships"},
					{"id": "1261150510", "start": "2018-01-05 14:00", "end": "2018-01-05 16:00", "text": "Calendar Girls"},
					{"id": "1261150511", "start": "2018-01-06 08:00", "end": "2018-01-08 08:00", "text": "Dirty Dancing"},
					{"id": "1261150512", "start": "2018-01-07 15:00", "end": "2018-01-07 17:00", "text": "Cirque du Soleil Varekai"},
					{"id": "1261150513", "start": "2018-01-08 15:00", "end": "2018-01-08 17:00", "text": "Grease"},
					{"id": "1261150514", "start": "2018-01-09 09:00", "end": "2018-01-09 11:00", "text": "The Lion King"},
					{"id": "1261150515", "start": "2018-01-09 07:00", "end": "2018-01-09 09:00", "text": "Cirque du Soleil Varekai"},
					{"id": "1261150516", "start": "2018-01-10 10:00", "end": "2018-01-12 10:00", "text": "Cirque du Soleil Varekai"},
					{"id": "1261150517", "start": "2018-01-12 09:00", "end": "2018-01-12 11:00", "text": "Masters Snooker 2010      Afternoon session"},
					{"id": "1261150518", "start": "2018-01-13 10:00", "end": "2018-01-13 12:00", "text": "The Lion King"},
					{"id": "1261150519", "start": "2018-01-13 13:00", "end": "2018-01-13 15:00", "text": "Cirque du Soleil Varekai"},
					{"id": "1261150520", "start": "2018-01-14 11:00", "end": "2018-01-14 13:00", "text": "Cat On a Hot Tin Roof"},
					{"id": "1261150521", "start": "2018-01-15 07:00", "end": "2018-01-17 07:00", "text": "Cirque du Soleil Varekai"},
					{"id": "1261150522", "start": "2018-01-16 07:00", "end": "2018-01-16 09:00", "text": "Ben Hur Live"},
					{"id": "1261150523", "start": "2018-01-16 16:00", "end": "2018-01-16 18:00", "text": "Billy Connolly"},
					{"id": "1261150524", "start": "2018-01-18 14:00", "end": "2018-01-18 16:00", "text": "Wicked"},
					{"id": "1261150525", "start": "2018-01-20 06:00", "end": "2018-01-20 08:00", "text": "Wicked"},
					{"id": "1261150526", "start": "2018-01-20 07:00", "end": "2018-01-22 07:00", "text": "Giselle"},
					{"id": "1261150527", "start": "2018-01-21 12:00", "end": "2018-01-21 14:00", "text": "Giselle"},
					{"id": "1261150528", "start": "2018-01-22 13:00", "end": "2018-01-22 15:00", "text": "Giselle"},
					{"id": "1261150529", "start": "2018-01-23 15:00", "end": "2018-01-23 17:00", "text": "Billy Connolly"},
					{"id": "1261150530", "start": "2018-01-24 11:00", "end": "2018-01-24 13:00", "text": "Jersey Boys"},
					{"id": "1261150531", "start": "2018-01-26 18:00", "end": "2018-01-28 18:00", "text": "Dirty Dancing"},
					{"id": "1261150532", "start": "2018-01-27 16:00", "end": "2018-01-27 18:00", "text": "Billy Elliot"},
					{"id": "1261150533", "start": "2018-01-28 18:00", "end": "2018-01-28 20:00", "text": "Reel Big Fish"},
					{"id": "1261150534", "start": "2018-01-29 14:00", "end": "2018-01-29 16:00", "text": "Jersey Boys"},
					{"id": "1261150535", "start": "2018-01-30 15:00", "end": "2018-01-30 17:00", "text": "West Ham  - Blackburn Rovers     Competition: Premier League"},
					{"id": "1261150536", "start": "2018-01-30 17:00", "end": "2018-02-01 17:00", "text": "The Lion King"},
					{"id": "1261150537", "start": "2018-02-01 09:00", "end": "2018-02-01 11:00", "text": "Legally Blonde The Musical"},
					{"id": "1261150538", "start": "2018-02-02 17:00", "end": "2018-02-02 19:00", "text": "Daniel Barenboim      + Berlin Staatskapelle"},
					{"id": "1261150539", "start": "2018-02-03 09:00", "end": "2018-02-03 11:00", "text": "Cat On a Hot Tin Roof"},
					{"id": "1261150540", "start": "2018-02-04 13:00", "end": "2018-02-04 15:00", "text": "Wicked"},
					{"id": "1261150541", "start": "2018-02-05 15:00", "end": "2018-02-07 15:00", "text": "Wicked"},
					{"id": "1261150542", "start": "2018-02-06 15:00", "end": "2018-02-06 17:00", "text": "Jersey Boys"},
					{"id": "1261150543", "start": "2018-02-06 06:00", "end": "2018-02-06 08:00", "text": "Cirque du Soleil Varekai"},
					{"id": "1261150544", "start": "2018-02-08 08:00", "end": "2018-02-08 10:00", "text": "Wicked"},
					{"id": "1261150545", "start": "2018-02-10 14:00", "end": "2018-02-10 16:00", "text": "Wicked"},
					{"id": "1261150546", "start": "2018-02-10 09:00", "end": "2018-02-12 09:00", "text": "Cirque du Soleil Varekai"},
					{"id": "1261150547", "start": "2018-02-11 12:00", "end": "2018-02-11 14:00", "text": "Cirque du Soleil Varekai"},
					{"id": "1261150548", "start": "2018-02-12 14:00", "end": "2018-02-12 16:00", "text": "Cirque du Soleil Varekai"},
					{"id": "1261150549", "start": "2018-02-13 06:00", "end": "2018-02-13 08:00", "text": "Billy Elliot"},
					{"id": "1261150550", "start": "2018-02-14 07:00", "end": "2018-02-14 09:00", "text": "Ne-Yo"},
					{"id": "1261150551", "start": "2018-02-16 08:00", "end": "2018-02-18 08:00", "text": "Dirty Dancing"},
					{"id": "1261150552", "start": "2018-02-17 08:00", "end": "2018-02-17 10:00", "text": "Billy Elliot"},
					{"id": "1261150553", "start": "2018-02-18 12:00", "end": "2018-02-18 14:00", "text": "Dirty Dancing"},
					{"id": "1261150554", "start": "2018-02-19 09:00", "end": "2018-02-19 11:00", "text": "Dirty Dancing"},
					{"id": "1261150555", "start": "2018-02-20 11:00", "end": "2018-02-20 13:00", "text": "Fulham - Birmingham City     Competition: Premier League"},
					{"id": "1261150556", "start": "2018-02-20 16:00", "end": "2018-02-22 16:00", "text": "Legally Blonde The Musical"},
					{"id": "1261150557", "start": "2018-02-22 16:00", "end": "2018-02-22 18:00", "text": "Wicked"},
					{"id": "1261150558", "start": "2018-02-24 11:00", "end": "2018-02-24 13:00", "text": "Sister Act"},
					{"id": "1261150559", "start": "2018-02-25 16:00", "end": "2018-02-25 18:00", "text": "Legally Blonde The Musical"},
					{"id": "1261150560", "start": "2018-02-26 15:00", "end": "2018-02-26 17:00", "text": "Grease"},
					{"id": "1261150561", "start": "2018-02-27 13:00", "end": "2018-03-01 13:00", "text": "The Lion King"},
					{"id": "1261150562", "start": "2018-02-27 14:00", "end": "2018-02-27 16:00", "text": "Cinderella On Ice"},
					{"id": "1261150563", "start": "2018-02-28 15:00", "end": "2018-02-28 17:00", "text": "Legally Blonde The Musical"},
					{"id": "1261150564", "start": "2018-03-06 16:00", "end": "2018-03-06 18:00", "text": "Fulham - Stoke City     Competition: Premier League"},
					{"id": "1261150565", "start": "2018-03-09 14:00", "end": "2018-03-09 16:00", "text": "The 69 Eyes"},
					{"id": "1261150566", "start": "2018-03-13 13:00", "end": "2018-03-15 13:00", "text": "Sara Baras"},
					{"id": "1261150567", "start": "2018-03-18 16:00", "end": "2018-03-18 18:00", "text": "Trivium"},
					{"id": "1261150568", "start": "2018-03-22 11:00", "end": "2018-03-22 13:00", "text": "Love Never Dies"},
					{"id": "1261150569", "start": "2018-03-27 14:00", "end": "2018-03-27 16:00", "text": "West Ham  - Stoke City     Competition: Premier League"},
					{"id": "1261150570", "start": "2018-03-31 08:00", "end": "2018-03-31 10:00", "text": "Swan Lake      Ballet Nacional de Cuba"},
					{"id": "1261150571", "start": "2018-04-03 09:00", "end": "2018-04-05 09:00", "text": "Peter Andre"},
					{"id": "1261150572", "start": "2018-04-08 10:00", "end": "2018-04-08 12:00", "text": "Paolo Nutini"},
					{"id": "1261150573", "start": "2018-04-12 10:00", "end": "2018-04-12 12:00", "text": "Love Never Dies"},
					{"id": "1261150574", "start": "2018-04-17 08:00", "end": "2018-04-17 10:00", "text": "Dancing On Ice"},
					{"id": "1261150575", "start": "2018-04-20 16:00", "end": "2018-04-20 18:00", "text": "Love Never Dies"},
					{"id": "1261150576", "start": "2018-04-24 06:00", "end": "2018-04-26 06:00", "text": "Love Never Dies"},
					{"id": "1261150577", "start": "2018-04-30 11:00", "end": "2018-04-30 13:00", "text": "Deadmau5"},
					{"id": "1261150578", "start": "2018-05-06 14:00", "end": "2018-05-06 16:00", "text": "Love Never Dies"},
					{"id": "1261150579", "start": "2018-05-10 15:00", "end": "2018-05-10 17:00", "text": "Lee Mack"},
					{"id": "1261150580", "start": "2018-05-14 09:00", "end": "2018-05-14 11:00", "text": "Gotan Project"},
					{"id": "1261150581", "start": "2018-05-19 15:00", "end": "2018-05-21 15:00", "text": "Love Never Dies"},
					{"id": "1261150582", "start": "2018-05-24 07:00", "end": "2018-05-24 09:00", "text": "Love Never Dies"},
					{"id": "1261150583", "start": "2018-05-29 14:00", "end": "2018-05-29 16:00", "text": "Guiness Premiership Final 2010     Competition: Guinness Premiership Final"},
					{"id": "1261150584", "start": "2018-06-04 11:00", "end": "2018-06-04 13:00", "text": "Mark Knopfler"},
					{"id": "1261150585", "start": "2018-06-11 15:00", "end": "2018-06-11 17:00", "text": "Swan Lake"},
					{"id": "1261150586", "start": "2018-06-18 15:00", "end": "2018-06-20 15:00", "text": "Leona Lewis"},
					{"id": "1261150587", "start": "2018-06-26 17:00", "end": "2018-06-26 19:00", "text": "Wimbledon: 3rd Round (Centre Court)"},
					{"id": "1261150588", "start": "2018-07-05 09:00", "end": "2018-07-05 11:00", "text": "Placido Domingo"},
					{"id": "1261150589", "start": "2018-07-17 11:00", "end": "2018-07-17 13:00", "text": "Pakistan v Australia 1st Test (Day 5)"},
					{"id": "1261150590", "start": "2018-08-22 07:00", "end": "2018-08-22 09:00", "text": "npower: England v Pakistan 3rd Test (Day 5)"},
					{"id": "1261150591", "start": "2018-10-23 06:00", "end": "2018-10-25 06:00", "text": "Level 42"},
					{"id": "1261150592", "start": "2018-11-24 09:00", "end": "2018-11-24 11:00", "text": "Jason Manford"}
				]
			});
			app.register(dataSet_1);
			
			app.supportMedia("all", "default");
			
			// Configure root container
			var container = app.getContainer();
			container.style.css({
				"width" : "100%",
				"top" : "0px",
				"height" : "100%",
				"left" : "0px"
			});
			
			// Layout
			var xYLayout_1 = new cpr.controls.layouts.XYLayout();
			container.setLayout(xYLayout_1);
			
			// UI Configuration
			var uIControlShell_1 = new cpr.controls.UIControlShell();
			if(typeof onUIControlShellInit == "function") {
				uIControlShell_1.addEventListener("init", onUIControlShellInit);
			}
			if(typeof onUIControlShellLoad == "function") {
				uIControlShell_1.addEventListener("load", onUIControlShellLoad);
			}
			container.addChild(uIControlShell_1, {
				"top": "40px",
				"right": "10px",
				"bottom": "10px",
				"left": "10px"
			});
			
			var button_1 = new cpr.controls.Button();
			button_1.value = "Load";
			if(typeof onButtonClick == "function") {
				button_1.addEventListener("click", onButtonClick);
			}
			container.addChild(button_1, {
				"top": "10px",
				"right": "10px",
				"width": "66px",
				"height": "20px"
			});
			
			var output_1 = new cpr.controls.Output();
			output_1.value = "DHTMLX 연동 예제(https://docs.dhtmlx.com/scheduler/)";
			output_1.style.css({
				"font-weight" : "bold"
			});
			container.addChild(output_1, {
				"top": "10px",
				"right": "86px",
				"left": "10px",
				"height": "20px"
			});
		}
	});
	app.title = "scheduler";
	cpr.core.Platform.INSTANCE.register(app);
})();
